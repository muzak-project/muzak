#!/usr/bin/env ruby

require "muzak"
require "socket"

def fatal(msg)
  puts "Fatal: #{msg}"
  exit 1
end

begin
  server_host = Muzak::Config.daemon_host
  server_port = Muzak::Config.daemon_port
  sock = TCPSocket.new server_host, server_port
rescue
  fatal "Is muzakd running?"
end

sock.puts ARGV.join(" ")
puts sock.gets
sock.close
